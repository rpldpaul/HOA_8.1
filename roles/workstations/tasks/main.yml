---

- name: Install EPEL Repo (prereq)
    yum:
      name: epel-release
      state: latest
    when: ansible_distribution == "CentOS"

- name: install Nagios (CentOS)
  yum:
    name: nagios
    state: present
  when: ansible_distribution == "CentOS"

- name: install Nagios (Ubuntu)
  apt:
    name: nagios3-core
    state: present
  when: ansible distribution == "Ubuntu"

- name: Install Nagios Dependencies (CentOS)
  yum:
    name:
      - gd-devel
      - libpng-devel
      - freetype-devel
      - gcc
      - glibc
    state: present
  when: ansible_distribution == "CentOS"

- name: Insall Nagios Dependencies (Ubuntu)
  apt:
    name:
      - gd-devel
      - libpng-devel
      - freetype-devel
      - gcc
      - glibc
    state: present
    use_backend: dnf4
  when: ansible_distribution == "Ubuntu"
